<div class="container">
  <h2>Administración de Usuarios</h2>
  
  <!-- Alerta de error -->
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>
  
  <!-- Indicador de carga -->
  <div *ngIf="loading" class="text-center my-3">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>
  
  <!-- Formulario para agregar usuarios -->
  <div class="card mb-4">
    <div class="card-header">
      <h3>Agregar nuevo usuario</h3>
    </div>
    <div class="card-body">
      <form (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label for="firstName" class="form-label">Nombre</label>
          <input type="text" class="form-control" id="firstName" name="firstName" 
                 [(ngModel)]="newUser.first_name" required>
        </div>
        
        <div class="mb-3">
          <label for="lastName" class="form-label">Apellido</label>
          <input type="text" class="form-control" id="lastName" name="lastName" 
                 [(ngModel)]="newUser.lastname" required>
        </div>
        
        <div class="mb-3">
          <label for="email" class="form-label">Correo electrónico</label>
          <input type="email" class="form-control" id="email" name="email" 
                 [(ngModel)]="newUser.email" required>
        </div>
        
        <button type="submit" class="btn btn-primary" [disabled]="loading">
          Guardar usuario
        </button>
      </form>
    </div>
  </div>
  
  <!-- Tabla de usuarios -->
  <div class="card">
    <div class="card-header">
      <h3>Lista de usuarios</h3>
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Email</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td>{{ user.id }}</td>
            <td>{{ user.first_name }}</td>
            <td>{{ user.lastname }}</td>
            <td>{{ user.email }}</td>
            <td>
              <span *ngIf="user.status === 1" class="badge bg-success">Activo</span>
              <span *ngIf="user.status === 0" class="badge bg-danger">Inactivo</span>
            </td>
            <td>
              <button class="btn btn-sm btn-danger" (click)="deleteUser(user.id)">
                Eliminar
              </button>
            </td>
          </tr>
          
          <tr *ngIf="users.length === 0 && !loading">
            <td colspan="6" class="text-center">No hay usuarios registrados</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
